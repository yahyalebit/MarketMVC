using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using Business.Abstract;
using Business.Concrete;
using DataAccess.Concrete;
using Entities.Concrete;
using UI.Helpers;
using UI.Models.ViewModel;

namespace UI.Controllers
{
    public class HomeController : Controller
    {
        ICategoryService _categoryService;
        IProductService _productService;

        public HomeController(ICategoryService categoryService, IProductService productService)
        {
            _categoryService = categoryService;
            _productService = productService;
        }

        public ActionResult Index()
        {
            //_categoryService.Add(new Category { Name = "Book", Description = "Bu bir kitaptır", Picture = "data:image/jpeg;base64,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" });
            //_categoryService.Add(new Category { Name = "Elektronik", Description = "Bu bir kitaptır", Picture="ssadas"});
                 
            return View(_categoryService.GetAll());
        }
        public ActionResult ListProductByCategory(int id)
        {
            //_categoryService.Add(new Category { Name = "Book", Description = "Bu bir kitaptır", Picture = "data:image/jpeg;base64,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" });
            //_categoryService.Add(new Category { Name = "Elektronik", Description = "Bu bir kitaptır", Picture="ssadas"});

            return View(_productService.GetAll().Where(p=>p.CategoryId==id).ToList());
        }
        
        public ActionResult ProductDetail(int id)
        {
            var product = _productService.GetById(id);

            return View(product);
        }

        public ActionResult Shop()
        {
            var model = new MainPageViewModel{
                Categories = _categoryService.GetAll(),
                Products = _productService.GetAll().OrderByDescending(p => p.Id).Take(10).ToList()
            };
            return View(model);
        }
        public ActionResult About()
        {
            ViewBag.Message = "Your application description page.";

            return View();
        }

        public ActionResult Contact()
        {
            ViewBag.Message = "Your contact page.";

            return View();
        }
        [HttpPost]
        public JsonResult AddToCart(int productId, int quantity = 1)
        {
            var product = _productService.GetById(productId);
            if (product != null)
            {
                var cart = SessionHelper.GetCart(HttpContext);
                cart.AddItem(product, quantity);
                SessionHelper.SetCart(HttpContext, cart);

                // Sepet miktarını al
                int cartItemCount = cart.Items.Sum(i => i.Quantity);

                // Success response ile birlikte sepetin toplam ürün miktarını döndür
                return Json(new { success = true, message = "Ürün sepete eklendi!", cartItemCount = cartItemCount });
            }

            return Json(new { success = false, message = "Ürün bulunamadı!" });
        }

        public JsonResult GetCartItemCount()
        {
            var cart = SessionHelper.GetCart(HttpContext);
            int cartItemCount = cart.Items.Sum(i => i.Quantity);

            // Sepetin toplam miktarını döndür
            return Json(new { cartItemCount = cartItemCount }, JsonRequestBehavior.AllowGet);
        }
    }
}